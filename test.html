<!DOCTYPE html>
<html>
<head>
    <script src="./phaser-3.23.0/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>
    <script src="./scripts/loading.js"></script>
    <script src="./scripts/statemachine.js"></script>
	<script src="./scripts/UI.js"></script>
    <script>
    var config = {
        type: Phaser.AUTO,
        width: 1320,
        height: 1320,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 0 }
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var game = new Phaser.Game(config);
	
	class Monster
	{
		constructor(x, y, scene)
		{
			this.body = scene.physics.add.sprite(x,y, 'character_anim');
			this.body.setCollideWorldBounds(true); 
			this.body.anims.play('greenmonster-idle', true);
			this.health = 100;
			this.status = 1;
		}
		minusHealth()
		{
			this.health -= 10;
		}
	}
		
	class Player
	{
		constructor(x, y, scene)
		{
			this.body = scene.physics.add.sprite(x, y, 'greenmonster');
			this.health = 333;
		}
	}
		
    function preload ()
    {
        loadImages(this);
    }

    function create ()
    {
		createUI(this);
		loadAnimation(this);
		loadMap(this);
		loadObjects(this);
		this.health = 333;
        this.keys = this.input.keyboard.addKeys('A, D, W, S, SPACE');
        this.stateMachine = new StateMachine('idle', {idle: new IdleState(), move: new MoveState(), swing: new SwingState(),}, [this, this.player]); 
    }

    function update()
    {
        this.stateMachine.step();
    }
    </script>
</body>
</html>